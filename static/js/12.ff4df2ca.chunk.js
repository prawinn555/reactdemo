(this.webpackJsonpreactdemo=this.webpackJsonpreactdemo||[]).push([[12,26],{41:function(e,a,t){"use strict";t.r(a);var r=t(11),n=t(12),l=t(14),s=t(13),c=t(0),i=t.n(c),o=t(85),u=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).refAlert=i.a.createRef(),n}return Object(n.a)(t,[{key:"componentDidMount",value:function(){this.scrollToVisible()}},{key:"componentDidUpdate",value:function(){this.scrollToVisible()}},{key:"scrollToVisible",value:function(){this.props.alert&&this.refAlert&&this.refAlert.current.scrollIntoView()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.props.alert&&i.a.createElement(o.a,{variant:this.props.alertVariant,ref:this.refAlert},this.props.alert))}}]),t}(c.PureComponent);a.default=u},51:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var r=t(0),n=t.n(r),l=t(109),s=t(230),c=t(231),i=t(83),o=t.n(i);function u(e){var a=e.movie,t=n.a.createElement(c.a,{id:"pop-".concat(a._id),className:"popFullPlot"},n.a.createElement(c.a.Title,{as:"h3"},"Full plot"),n.a.createElement(c.a.Content,null,a.fullplot));return n.a.createElement("div",{className:"px-2 py-2",key:"movie-".concat(a._id)},n.a.createElement("div",{className:"movie"},n.a.createElement("div",{className:"px-2 py-2"},n.a.createElement(s.a,{placement:"right",overlay:t},n.a.createElement("span",{className:"action title"},a.title," (",a.year,")")),n.a.createElement(l.a,{className:"movieTable"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"poster"},a.poster&&n.a.createElement("img",{className:"img-fluid",src:a.poster,alt:a.poster})),n.a.createElement("td",{className:"movieInfo"},n.a.createElement("div",null,"Cast : ",a.cast&&a.cast.map((function(a,t){return n.a.createElement("span",{key:a},t>0&&n.a.createElement("span",null,",\xa0"),n.a.createElement("span",{className:"action cast",onClick:function(){return e.addLabel({type:"cast",value:a})}},a))}))),n.a.createElement("div",null,a.genres&&a.genres.map((function(a,t){return n.a.createElement("span",{key:a},t>0&&n.a.createElement("span",null,",\xa0"),n.a.createElement("span",{className:"action genre",onClick:function(){return e.addLabel({type:"genres",value:a})}},a))}))),a.directors&&n.a.createElement("div",null,"Directors : ",a.directors.join(", ")),n.a.createElement("div",null,a.countries&&a.countries.join(", "),"  ",a.languages&&"(".concat(a.languages.join(", "),")")),n.a.createElement("div",{className:"plot"},a.plot),n.a.createElement("div",{className:"py-2"},n.a.createElement(s.a,{trigger:"click",placement:"right",rootClose:!0,overlay:n.a.createElement(c.a,{id:"pop-json-".concat(a._id),className:"popMovieJson"},n.a.createElement(c.a.Title,{as:"h3"},"Json view"),n.a.createElement(c.a.Content,null,n.a.createElement(o.a,{displayDataTypes:!1,src:a})))},n.a.createElement("span",{role:"img",className:"action"},"\ud83c\udf9e\ufe0f More data"))))))))))}},58:function(e,a,t){"use strict";t.r(a);var r=t(588),n=t(79),l=t.n(n),s=t(80),c=t(11),i=t(12),o=t(14),u=t(13),m=t(0),d=t.n(m),h=t(84),p=t(27),f=t(88),v=t(41),E=t(83),b=t.n(E),y=t(89);function g(e,a){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(l.a.mark((function e(a,t){var r,n,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={filter:a||"{}",limit:t},console.log("findMovies ",r),n=new URL(y.a),Object.keys(r).forEach((function(e){return n.searchParams.append(e,r[e])})),e.next=6,fetch(n);case 6:return s=e.sent,e.next=9,s.json();case 9:return c=e.sent,console.log("result ",c),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=t(15),k=t(51),C=(t(70),function(e){Object(o.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).handleFormChange=function(e){var a={};a[e.target.name]=e.target.value,n.setState(a)},n.find=Object(s.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.showInfo("Searching..."),e.prev=1,e.next=4,g(JSON.stringify(n.getQuery()),10);case 4:a=e.sent,n.setState({data:a}),t=a.count>10?" Only ".concat(10," results are shown"):"",a.count>=0?n.showSuccess("Found ".concat(a.count," movie(s) \n\t\t\t\t\t").concat(t)):n.showError("Error "+a.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.showError("Error "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),n.getQuery=function(){var e={};if(n.state.search_title.trim()&&(e.title="/".concat(n.state.search_title.trim(),"/")),n.state.search_cast.trim()&&(e.cast="/".concat(n.state.search_cast.trim(),"/")),n.state.search_year.trim()){var a=n.state.search_year.trim();a.startsWith("{")?e.year=Object(N.b)(Object(N.a)(a)):e.year=parseInt(a)}if(n.state.search_query.trim()){var t=n.state.search_query.trim();t=Object(N.b)(Object(N.a)(t)),Object.keys(t).forEach((function(a){return e[a]=t[a]}))}return n.addLabelsToQuery("cast",e),n.addLabelsToQuery("genres",e),n.setState({query:e}),e},n.addLabelsToQuery=function(e,a){var t=n.state.search_labels.filter((function(a){return a.type===e}));0!==t.length&&(a[e]={$in:t.map((function(e){return e.value}))})},n.addLabel=function(e){n.state.search_labels.find((function(a){return a.type===e.type&&a.value===e.value}))||n.setState({search_labels:[].concat(Object(r.a)(n.state.search_labels),[e])},n.find)},n.removeLabel=function(e){var a=n.state.search_labels.find((function(a){return a.type===e.type&&a.value===e.value}));a&&n.setState({search_labels:n.state.search_labels.filter((function(e){return!Object.is(e,a)}))},n.find)},n.showError=function(e){n.setState({alert:e,alertVariant:"danger"})},n.showWarn=function(e){n.setState({alert:e,alertVariant:"warning"})},n.showSuccess=function(e){n.setState({alert:e,alertVariant:"success",ready:!0})},n.showInfo=function(e){n.setState({alert:e,alertVariant:"info"})},n.state={alert:"What are you looking for?",alertVariant:"info",search_title:"",search_cast:"",search_year:"",search_query:"",search_labels:[]},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"px-2"},d.a.createElement(v.default,{alert:this.state.alert,alertVariant:this.state.alertVariant}),d.a.createElement(h.a,null,d.a.createElement(f.a,{className:"mb-3"},d.a.createElement(f.a.Prepend,null,d.a.createElement(f.a.Text,{id:"fieldLabel-title"},"Title")),d.a.createElement(h.a.Control,{name:"search_title",value:this.state.search_title,placeholder:"Ex. devil",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-title"})),d.a.createElement(f.a,{className:"mb-3"},d.a.createElement(f.a.Prepend,null,d.a.createElement(f.a.Text,{id:"fieldLabel-cast"},"Cast")),d.a.createElement(h.a.Control,{name:"search_cast",value:this.state.search_cast,placeholder:"Ex. tom cruise",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-cast"})),d.a.createElement(f.a,{className:"mb-3"},d.a.createElement(f.a.Prepend,null,d.a.createElement(f.a.Text,{id:"fieldLabel-title"},"Year")),d.a.createElement(h.a.Control,{name:"search_year",value:this.state.search_year,placeholder:"Ex. 2014 or { $gt : 2014 } or { $gte : 2014 }",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-year"})),d.a.createElement(f.a,{className:"mb-3"},d.a.createElement(f.a.Prepend,null,d.a.createElement(f.a.Text,{id:"fieldLabel-query"},"Other query in JSON")),d.a.createElement(h.a.Control,{name:"search_query",value:this.state.search_query,placeholder:"Ex. {directors:/spielberg/}",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-query"})),d.a.createElement("div",{className:"py-2"},"Labels : ",this.state.search_labels.map((function(a){return d.a.createElement("span",{className:"px-2",key:"T-".concat(a.type,"-V-").concat(a.value)},d.a.createElement(p.a,{onClick:function(){return e.removeLabel(a)},className:"btn-sm",variant:"cast"===a.type?"outline-primary":"outline-success"},a.value," ",d.a.createElement("span",{role:"img"},"\u274e ")))}))),d.a.createElement(p.a,{variant:"primary",onClick:this.find},"Search")),this.state.query&&d.a.createElement("div",{className:"py-2"},d.a.createElement("div",null,"Query"),d.a.createElement(b.a,{displayDataTypes:!1,src:this.state.query,collapsed:!0})),this.state.data&&this.state.data.movies&&d.a.createElement("div",{className:"py-2"},this.state.data.movies.map((function(a){return d.a.createElement(k.default,{key:a._id,movie:a,addLabel:e.addLabel})}))))}}]),t}(m.PureComponent));a.default=C},70:function(e,a,t){},89:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"a",(function(){return n}));var r="https://generic-db.glitch.me/",n="https://verceltest-smoky.now.sh/api/movies"}}]);
//# sourceMappingURL=12.ff4df2ca.chunk.js.map