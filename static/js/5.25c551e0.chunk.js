(this.webpackJsonpreactdemo=this.webpackJsonpreactdemo||[]).push([[5,7,8,12,15,16,20],{39:function(e,t,a){"use strict";a.r(t),a.d(t,"findItems",(function(){return i})),a.d(t,"findItemById",(function(){return l})),a.d(t,"deleteItemById",(function(){return m})),a.d(t,"saveItem",(function(){return f})),a.d(t,"formatJson",(function(){return p})),a.d(t,"getTimeStamp",(function(){return b}));var r=a(74),n=a.n(r),o=a(75),s=a(40);function i(e){return c.apply(this,arguments)}function c(){return(c=Object(o.a)(n.a.mark((function e(t){var a,r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("filter with ".concat(t)),a="items"+(t?"?"+t:""),r=s.serviceUrl+a,e.next=5,fetch(r);case 5:return o=e.sent,e.next=8,o.json();case 8:return i=e.sent,console.log(a+" => ",i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(n.a.mark((function e(t){var a,r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("find by id ".concat(t)),a="items/"+t,r=s.serviceUrl+a,e.next=5,fetch(r);case 5:return o=e.sent,e.next=8,o.json();case 8:return i=e.sent,console.log(a+" => ",i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(n.a.mark((function e(t){var a,r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete by id ".concat(t)),a="items/"+t+"/delete",r=s.serviceUrl+a,e.next=5,fetch(r,{method:"DELETE",mode:"cors"});case 5:return o=e.sent,e.next=8,o.json();case 8:return i=e.sent,console.log(a+" => ",i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(n.a.mark((function e(t){var a,r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("save",t),a="items/save",r=s.serviceUrl+a,e.next=5,fetch(r,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)});case 5:return o=e.sent,e.next=8,o.json();case 8:return i=e.sent,console.log(a+" => ",i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t;if(!e)return null;try{t=JSON.parse(e)}catch(a){console.log("json invalide",a),t={jsonInvalide:""+a}}return console.log("formatJson",t),"object"===typeof t?t:{nonJsonData:""+t}}function b(){var e=function(e){return(e>9?"":"0")+e},t=new Date,a=t.getMonth()+1,r=e(t.getDate()),n=e(t.getHours()),o=e(t.getMinutes()),s=e(t.getSeconds());return[t.getFullYear(),a,r,"_",n,o,s].join("")}},40:function(e,t,a){"use strict";a.r(t),a.d(t,"serviceUrl",(function(){return r}));var r="https://generic-db.glitch.me/"},41:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a(12),o=a(14),s=a(13),i=a(0),c=a.n(i),l=a(79),u=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).refAlert=c.a.createRef(),n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.scrollToVisible()}},{key:"componentDidUpdate",value:function(){this.scrollToVisible()}},{key:"scrollToVisible",value:function(){this.props.alert&&this.refAlert&&this.refAlert.current.scrollIntoView()}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,this.props.alert&&c.a.createElement(l.a,{variant:this.props.alertVariant,ref:this.refAlert},this.props.alert))}}]),a}(i.PureComponent);t.default=u},42:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a(12),o=a(14),s=a(13),i=a(0),c=a.n(i),l=a(126),u=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).refreshCount=0,n}return Object(n.a)(a,[{key:"render",value:function(){return this.refreshCount++,console.log("DynamicFormChild render",this.refreshCount),c.a.createElement(l.a,{schema:this.props.schema,onSubmit:this.props.onSubmit,onError:this.props.onError,formData:this.props.formData,showErrorList:!1})}}]),a}(i.PureComponent);t.default=u},43:function(e,t,a){"use strict";a.r(t);t.default={title:"Let's define a simple form",description:"To create a complex form, use the 'raw JSON editor'",type:"object",properties:{title:{type:"string",default:"Title of your form",title:"Give your form a title"},listFields:{type:"array",title:"Manage the fields",items:{type:"object",required:["fieldName","type"],properties:{fieldName:{type:"string",title:"Techinical field name",pattern:"^[A-Za-z0-9_-]{0,30}$"},type:{enum:["string","integer","boolean","date","enum"],default:"string",title:"Data type"},title:{type:"string",title:"Title to show in the form"},booleanRequired:{type:"boolean",title:"Required?"}},dependencies:{type:{oneOf:[{properties:{type:{enum:["enum"]},enumValues:{type:"string",title:"Enum values (comma separated)"}}},{properties:{type:{enum:["string","integer","boolean","date"]}}}]}}}}}}},44:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var r=a(0),n=a.n(r),o=a(167),s=a(26);function i(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.a,{show:e.show,onHide:e.handleClose,animation:!0,size:e.size,backdrop:"static"},n.a.createElement(o.a.Header,{closeButton:!0},n.a.createElement(o.a.Title,null,e.title?e.title:"Confirmation")),n.a.createElement(o.a.Body,null,e.children),e.handleConfirm&&n.a.createElement(o.a.Footer,null,n.a.createElement(s.a,{variant:"secondary",onClick:e.handleClose},"Close"),n.a.createElement(s.a,{variant:"primary",onClick:e.handleConfirm},"Confirm"))))}},45:function(e,t,a){"use strict";a.r(t);var r=a(74),n=a.n(r);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,n=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(c){n=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=a(75),c=a(11),l=a(12),u=a(14),m=a(13),d=a(0),f=a.n(d),h=a(92),p=a(108),b=a(41),y=a(82),v=a.n(y),E=a(39),g=a(42),w=a(43),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).prefillForm=function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(E.findItemById)(t).then((function(e){if(e.length>0){for(var a=e[0],n={},o=0,i=Object.entries(a);o<i.length;o++){var c=s(i[o],2),l=c[0],u=c[1];if("content"===l){var m=Object(E.formatJson)(u);n.dataToSave=m,r.dataForRJSF=r.adaptFormDefinition(m,a.type)}else n[l]=u}return console.log("setState",n),r.setState(n),a}return Promise.reject("ID ".concat(t," not found "))})).then((function(e){return r.loadSchema(e.type)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadSchema=function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("FORM"!==t){e.next=4;break}return r.setState({schema:w.default}),console.log("use SchemaForm",w.default),e.abrupt("return",Promise.resolve({id:"FORM",description:"meta schema",schema:w.default}));case 4:return e.abrupt("return",Object(E.findItemById)(t).then((function(e){if(e.length>0){var a=e[0];if("FORM"!==a.type)return Promise.reject("Object ID ".concat(t," must be of type FORM (found ").concat(a.type,")"));var n=Object(E.formatJson)(a.content);return n&&n.properties?(r.setState({schema:n}),a):Promise.reject("Form '".concat(t,"' has invalide schema (found ").concat(a.content,")"))}return Promise.reject("Form '".concat(t,"' not found "))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showError=function(e){r.setState({alert:e,alertVariant:"danger"})},r.showWarn=function(e){r.setState({alert:e,alertVariant:"warning"})},r.showSuccess=function(e){r.setState({alert:e,alertVariant:"success",ready:!0})},r.showInfo=function(e){r.setState({alert:e,alertVariant:"info"})},r.handleFormChange=function(e){var t={};t[e.target.name]=e.target.value,r.setState(t)},r.onSubmit=function(){var e=Object(i.a)(n.a.mark((function e(t){var a,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("submit",t),r.showInfo("Saving..."),a=r.transformToSave(t.formData),r.setState({dataToSave:a}),o=JSON.stringify(a,null," "),e.next=8,Object(E.saveItem)({id:r.state.id,type:r.state.type,description:r.state.description,content:o});case 8:"OK"===(s=e.sent).status?r.showSuccess(s.message):r.showError(s.message),"OK"===s.status&&r.props.callbackRefresh&&r.props.callbackRefresh(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),r.showError(""+e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),r.transformToSave=function(e){return"FORM"!==r.state.type?e:e.listFields?((e=Object.assign({},e)).type="object",e.properties={},e.required=[],e.listFields.forEach((function(t,a){var r=Object.assign({},t);e.properties[r.fieldName]=r,r.booleanRequired&&e.required.push(r.fieldName),delete r.fieldName,"date"===r.type?(r.type="string",r.format="date"):"enum"===r.type&&(delete r.type,r.enum=[],r.enumValues&&(r.enumValues.split(",").forEach((function(e){r.enum.push(e.trim())})),delete r.enumValues))})),delete e.listFields,console.log("transformToSave",e),e):e},r.adaptFormDefinition=function(e,t){if(!e)return{};if("FORM"!==t)return e;var a=Object.assign({},e);return a.properties?(a.listFields=[],Object.getOwnPropertyNames(a.properties).forEach((function(e,t){var r=a.properties[e];r.fieldName=e,"date"===r.format?(r.type="date",delete r.format):r.enum&&(r.type="enum",r.enumValues=r.enum.join(", "),delete r.enum),a.required&&a.required.includes(e)&&(r.booleanRequired=!0),a.listFields.push(r)})),delete a.properties,console.log("adaptFormDefinition",e,a),a):a},r.onError=function(e){r.showWarn("Problem with a form? \n\t\t\t".concat(e&&e[0]&&e[0].stack?e[0].stack:"")),console.log("Form error",e)},r.state={alert:"Loading...",varient:"info"},r.idReadOnly=Boolean(e.param.id),r.dataForRJSF={},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.param.id?(console.log("create an prefield form"),this.prefillForm(this.props.param.id).then((function(){e.showSuccess()})).catch((function(t){return e.showError("Error while loading : "+t)}))):(console.log("create an empty form"),this.loadSchema(this.props.param.form).then((function(t){return e.setState({id:e.props.param.suggestedId,type:t.id,description:e.props.param.initialDescription?e.props.param.initialDescription:null,dataToSave:e.props.param.initialData?e.props.param.initialData:null}),e.dataForRJSF=e.adaptFormDefinition(e.props.param.initialData,t.id),e.showSuccess()})).catch((function(t){console.log(t),e.showError("Error while loading : "+t)})))}},{key:"render",value:function(){return f.a.createElement("div",{className:"px-2"},f.a.createElement(b.default,{alert:this.state.alert,alertVariant:this.state.alertVariant}),this.state.ready&&f.a.createElement(f.a.Fragment,null,f.a.createElement(h.a,null,f.a.createElement(p.a,{className:"mb-3"},f.a.createElement(p.a.Prepend,null,f.a.createElement(p.a.Text,{id:"fieldLabel-id"},"Unique ID")),f.a.createElement(h.a.Control,{name:"id",value:this.state.id,placeholder:"required",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-id",disabled:Boolean(this.idReadOnly)})),f.a.createElement(p.a,{className:"mb-3"},f.a.createElement(p.a.Prepend,null,f.a.createElement(p.a.Text,{id:"fieldLabel-type"},"Type")),f.a.createElement(h.a.Control,{name:"type",value:this.state.type,"aria-describedby":"fieldLabel-type",disabled:!0})),f.a.createElement(p.a,{className:"mb-3"},f.a.createElement(p.a.Prepend,null,f.a.createElement(p.a.Text,{id:"fieldLabel-description"},"Description")),f.a.createElement(h.a.Control,{name:"description",value:this.state.description?this.state.description:"",placeholder:"describe your form",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-description"}))),f.a.createElement("div",{className:"px-2"},f.a.createElement(g.default,{schema:this.state.schema,onSubmit:this.onSubmit,onError:this.onError,formData:this.dataForRJSF})),this.state.dataToSave&&f.a.createElement("div",{className:"py-2"},f.a.createElement("div",null,"View JSON data"),f.a.createElement(v.a,{displayDataTypes:!1,src:this.state.dataToSave,collapsed:"true"}))))}}]),a}(d.PureComponent);t.default=O},46:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a(12),o=a(14),s=a(13),i=a(0),c=a.n(i),l=a(79),u=a(82),m=a.n(u),d=a(39),f=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getFormattedObject=function(){console.log("data",n.state.data);var e=n.state.data.content;try{var t=JSON.parse(e);if(t&&"object"===typeof t)return console.log("result",t),t}catch(a){console.log(a)}return{content_non_json:e}},n.state={success:"",error:""},Object(d.findItemById)(e.item).then((function(e){e.length>0?n.setState({data:e[0],error:""}):n.setState({error:"Error : not found"})}),(function(e){n.setState({error:"Error while loading : "+e})})),n}return Object(n.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"px-2"},this.state.success&&c.a.createElement(l.a,{variant:"success"},this.state.success),this.state.error&&c.a.createElement(l.a,{variant:"danger"},this.state.error),this.state.data&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},"Type : ",this.state.data.type),c.a.createElement("div",{className:"row"},"Description : ",this.state.data.description)),c.a.createElement("div",{className:"py-2"},c.a.createElement(m.a,{displayDataTypes:!1,src:this.getFormattedObject()}))))}}]),a}(i.PureComponent);t.default=f},47:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}a.r(t);var o=a(74),s=a.n(o),i=a(75),c=a(11),l=a(12),u=a(14),m=a(13),d=a(0),f=a.n(d),h=a(92),p=a(26),b=a(108),y=a(41),v=a(82),E=a.n(v),g=a(39),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).handleFormChange=function(e){var t={};t[e.target.name]=e.target.value,r.setState(t)},r.save=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.showInfo("Saving..."),t=Object(g.formatJson)(r.state.content),e.next=5,Object(g.saveItem)({id:r.state.id,type:r.state.type,description:r.state.description,content:r.state.content});case 5:a=e.sent,r.props.callbackRefresh&&r.props.callbackRefresh(),r.setState({formattedObject:t}),"OK"===a.status?r.showSuccess(a.message):r.showError(a.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),r.showError("Error "+e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),r.adjustRows=function(e){if(!e)return 3;var t=e.split("\n");return Math.min(t.length+1,10)},r.showError=function(e){r.setState({alert:e,alertVariant:"danger"})},r.showWarn=function(e){r.setState({alert:e,alertVariant:"warning"})},r.showSuccess=function(e){r.setState({alert:e,alertVariant:"success",ready:!0})},r.showInfo=function(e){r.setState({alert:e,alertVariant:"info"})},r.state={alert:"Loading...",alertVariant:"info"},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.itemId)Object(g.findItemById)(this.props.itemId).then((function(t){if(t.length>0){var a=Object(g.formatJson)(t[0].content);e.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t[0],{idReadOnly:!0,formattedObject:a})),e.showSuccess("")}else e.showError("Error : not found")}),(function(t){e.showError("Error while loading : "+t)}));else{this.setState({formattedObject:Object(g.formatJson)(""),id:"",description:"",content:"",type:this.props.objectType}),this.showSuccess("")}}},{key:"render",value:function(){return f.a.createElement("div",{className:"px-2"},f.a.createElement(y.default,{alert:this.state.alert,alertVariant:this.state.alertVariant}),this.state.ready&&f.a.createElement(f.a.Fragment,null,f.a.createElement(h.a,null,f.a.createElement(b.a,{className:"mb-3"},f.a.createElement(b.a.Prepend,null,f.a.createElement(b.a.Text,{id:"fieldLabel-id"},"Unique ID")),f.a.createElement(h.a.Control,{name:"id",value:this.state.id,placeholder:"required",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-id",disabled:Boolean(this.state.idReadOnly)})),f.a.createElement(b.a,{className:"mb-3"},f.a.createElement(b.a.Prepend,null,f.a.createElement(b.a.Text,{id:"fieldLabel-description"},"Description")),f.a.createElement(h.a.Control,{name:"description",value:this.state.description?this.state.description:"",placeholder:"describe your data",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-description"})),f.a.createElement(h.a.Group,{controlId:"content"},f.a.createElement(h.a.Label,null,"Json content"),f.a.createElement(h.a.Control,{as:"textarea",name:"content",rows:this.adjustRows(this.state.content),placeholder:'{ "value" : "3" }',onChange:this.handleFormChange,value:this.state.content?this.state.content:""})),f.a.createElement(p.a,{variant:"primary",onClick:this.save},"Save")),this.state.formattedObject&&f.a.createElement("div",{className:"py-2"},f.a.createElement("div",null,"Json view"),f.a.createElement(E.a,{displayDataTypes:!1,src:this.state.formattedObject}))))}}]),a}(d.PureComponent);t.default=w},48:function(e,t,a){"use strict";a.r(t);var r=a(74),n=a.n(r),o=a(75),s=a(11),i=a(12),c=a(14),l=a(13),u=a(0),m=a.n(u),d=a(1),f=a(2),h=a(4),p=a.n(h),b=a(5),y=m.a.forwardRef((function(e,t){var a=e.bsPrefix,r=e.className,n=e.striped,o=e.bordered,s=e.borderless,i=e.hover,c=e.size,l=e.variant,u=e.responsive,h=Object(f.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),y=Object(b.b)(a,"table"),v=p()(r,y,l&&y+"-"+l,c&&y+"-"+c,n&&y+"-striped",o&&y+"-bordered",s&&y+"-borderless",i&&y+"-hover"),E=m.a.createElement("table",Object(d.a)({},h,{className:v,ref:t}));if(u){var g=y+"-responsive";return"string"===typeof u&&(g=g+"-"+u),m.a.createElement("div",{className:g},E)}return E})),v=a(79),E=a(44),g=a(46),w=a(23),O=a.n(w),j=a(39),S=a(47),F=a(45),C=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).refresh=function(e){Object(j.findItems)(r.props.filter).then((function(t){t=t.sort((function(e,t){return e.id.localeCompare(t.id)})),r.setState({data:t}),r.showSuccess("".concat(e||""," ").concat(t.length," element(s) found.")),r.props.notifyResultList&&r.props.notifyResultList(t)}),(function(e){r.showError("Error while loading : "+e)}))},r.askConfirmDelete=function(e){console.log("delete item",e),r.setState({itemToDelete:e})},r.confirmDelete=Object(o.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.itemToDelete,r.setState({itemToDelete:null}),e.prev=2,e.next=5,Object(j.deleteItemById)(t);case 5:a=e.sent,console.log("delete result",a),r.refresh("Deleted "+t+". "),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r.showError("Error while deleting : "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),r.cancelDelete=function(){r.setState({itemToDelete:null})},r.ViewItem=function(e){console.log("itemToShow",e),r.setState({itemToShow:e})},r.editCustomForm=function(e){r.setState({customFormParam:e})},r.editRawJson=function(e){r.setState({itemToEditAsRawJson:e})},r.needRefresh=!1,r.notifyRefresh=function(){r.needRefresh=!0},r.conditionalRefresh=function(){r.needRefresh&&(r.refresh(),r.needRefresh=!1)},r.showError=function(e){r.setState({alert:e,alertVariant:"danger"})},r.showWarn=function(e){r.setState({alert:e,alertVariant:"warning"})},r.showSuccess=function(e){r.setState({alert:e,alertVariant:"success",ready:!0})},r.showInfo=function(e){r.setState({alert:e,alertVariant:"info"})},r.state={alert:"Please wait...",alertVariant:"info"},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.refresh("")}},{key:"componentDidUpdate",value:function(e){e.filter!==this.props.filter&&this.refresh("")}},{key:"render",value:function(){var e=this;return console.log("ManageList render ",this.props.filter),m.a.createElement("div",{className:"py-2"},this.state.alert&&m.a.createElement(v.a,{variant:this.state.alertVariant},this.state.alert),m.a.createElement(E.default,{show:Boolean(this.state.itemToDelete),handleConfirm:this.confirmDelete,handleClose:this.cancelDelete},m.a.createElement("p",null,"Do you want to delete the item ID ",this.setState.itemToDelete," ?")),this.state.itemToShow&&m.a.createElement(E.default,{show:Boolean(this.state.itemToShow),title:"View Item ID ".concat(this.state.itemToShow),handleClose:function(){e.setState({itemToShow:null})}},m.a.createElement(g.default,{item:this.state.itemToShow})),this.state.itemToEditAsRawJson&&m.a.createElement(E.default,{show:Boolean(this.state.itemToEditAsRawJson),size:"lg",title:"Edit ".concat(this.state.itemToEditAsRawJson.type," ID ").concat(this.state.itemToEditAsRawJson.id," (as raw json)"),handleClose:function(){e.conditionalRefresh(),e.setState({itemToEditAsRawJson:null})}},m.a.createElement(S.default,{itemId:this.state.itemToEditAsRawJson.id,callbackRefresh:this.notifyRefresh})),this.state.customFormParam&&m.a.createElement(E.default,{show:Boolean(this.state.customFormParam),size:"xl",title:this.state.customFormParam.id?"Edit item ID ".concat(this.state.customFormParam.id):"Create a new object ".concat(this.state.customFormParam.form),handleClose:function(){e.conditionalRefresh(),e.setState({customFormParam:null})}},m.a.createElement(F.default,{param:this.state.customFormParam,callbackRefresh:this.state.customFormParam.form?null:this.notifyRefresh})),this.state.data&&m.a.createElement(y,{striped:!0,bordered:!0,hover:!0,size:"sm"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"ID"),this.props.showType&&m.a.createElement("th",null,"Type (Form ID)"),m.a.createElement("th",null,"Description"),m.a.createElement("th",null,"Custom form"),m.a.createElement("th",null,"Simple actions"))),m.a.createElement("tbody",null,this.state.data.map((function(t){return m.a.createElement("tr",{key:t.id},m.a.createElement("td",null,t.id),e.props.showType&&m.a.createElement("th",null,t.type),m.a.createElement("td",null,t.description),m.a.createElement("td",null,"FORM"===t.type&&m.a.createElement("button",{onClick:function(){return e.editCustomForm({form:t.id,suggestedId:"".concat(t.id,"_").concat(Object(j.getTimeStamp)())})},title:"New instance from the form ".concat(t.id)},O.a.plus),"FORM"===t.type&&m.a.createElement("button",{onClick:function(){return e.editCustomForm({id:t.id})},title:"Edit the form definition ".concat(t.id)},O.a.gear),"FORM"!==t.type&&m.a.createElement("button",{onClick:function(){return e.editCustomForm({id:t.id})},title:"Edit the object ".concat(t.id," with the form ").concat(t.type)},O.a.memo)),m.a.createElement("td",null,m.a.createElement("button",{onClick:function(){return e.editRawJson(t)},title:"Edit raw json"},O.a.pencil),m.a.createElement("button",{onClick:function(){return e.ViewItem(t.id)},title:"View raw json"},O.a.magnifyingGlass),m.a.createElement("button",{onClick:function(){return e.askConfirmDelete(t.id)},title:"Delete"},O.a.wastebasket)))})))))}}]),a}(u.PureComponent);t.default=C},54:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a(12),o=a(14),s=a(13),i=a(0),c=a.n(i),l=a(23),u=a.n(l),m=a(48),d=a(10),f=a(39),h=a(44),p=a(45),b=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).refresh=function(){Object(f.findItems)("type=FORM").then((function(e){e=e.sort((function(e,t){return e.id.localeCompare(t.id)})),n.setState({formList:e,error:""})}),(function(e){n.setState({error:"Error while loading : "+e})}))},n.select=function(e){var t=e.target.getAttribute("data-index");void 0===t&&(t=null),n.setState({selectedIndex:t})},n.editCustomForm=function(){n.setState({customFormParam:{form:n.getSelectedForm().id,suggestedId:"".concat(n.getSelectedForm().id,"_").concat(Object(f.getTimeStamp)())}})},n.getSelectedForm=function(){return n.state.selectedIndex?n.state.formList[n.state.selectedIndex]:null},n.closeCreationModal=function(){n.setState({customFormParam:null})},n.notifyRefresh=function(){n.refreshCount++},n.state={selectedIndex:null,formList:[]},n.refreshCount=1,n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"px-2"},this.state.customFormParam&&c.a.createElement(h.default,{show:Boolean(this.state.customFormParam),size:"xl",title:this.state.customFormParam.id?"Edit item ID ".concat(this.state.customFormParam.id):"Create a new object ".concat(this.state.customFormParam.form),handleClose:this.closeCreationModal},c.a.createElement(p.default,{param:this.state.customFormParam,callbackRefresh:this.notifyRefresh})),c.a.createElement(d.a,{className:"px-2"},c.a.createElement(d.a.Toggle,{variant:"primary",id:"dropdown-basic"},"Filter by an object type"),c.a.createElement(d.a.Menu,null,c.a.createElement(d.a.Item,{href:"#",onClick:this.select,key:"all"},c.a.createElement("b",null,"All data")),this.state.formList.map((function(t,a){return c.a.createElement(d.a.Item,{href:"#",onClick:e.select,key:t.id,"data-index":a},"".concat(t.id," - ").concat(t.description))})))),c.a.createElement(m.default,{filter:this.state.selectedIndex?"type=".concat(this.state.formList[this.state.selectedIndex].id,"&refreshCount=").concat(this.refreshCount):"type=FORM&opposite=true&refreshCount=".concat(this.refreshCount),showType:"true"}),"New instance",this.state.selectedIndex&&" of ".concat(this.state.formList[this.state.selectedIndex].id," "),":",c.a.createElement("span",{className:"px-2"},this.state.selectedIndex?c.a.createElement("button",{onClick:this.editCustomForm},u.a.plus):c.a.createElement("span",{style:{color:"grey"}},"Choose a type to create an instance.")))}}]),a}(i.PureComponent);t.default=b}}]);
//# sourceMappingURL=5.25c551e0.chunk.js.map