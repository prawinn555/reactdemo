{"version":3,"sources":["demo/Alert/AutoFocusAlert.js","demo/Movies/Movie.js","service/movies-service.js","demo/Movies/Movies.js","env.js"],"names":["AutoFocusAlert","props","refAlert","React","createRef","this","scrollToVisible","alert","current","scrollIntoView","variant","alertVariant","ref","PureComponent","Movie","m","movie","overlay","id","_id","className","Title","as","Content","fullplot","key","placement","title","year","poster","style","width","height","src","alt","cast","map","el","i","onClick","addLabel","type","value","genres","directors","join","countries","languages","plot","trigger","rootClose","displayDataTypes","role","findMovies","filter","limit","a","params","console","log","url","URL","moviesServiceUrl","Object","keys","forEach","searchParams","append","fetch","res","json","Movies","handleFormChange","ev","change","target","name","setState","find","showInfo","JSON","stringify","getQuery","data","count","showSuccess","showError","message","query","state","search_title","trim","search_cast","search_year","y","startsWith","formatJson","correctJson","parseInt","search_query","q","k","addLabelsToQuery","attribute","labels","search_labels","l","length","$in","p","removeLabel","v","is","err","showWarn","msg","ready","Form","InputGroup","Prepend","Text","Control","placeholder","onChange","aria-describedby","Button","collapsed","movies","serviceUrl"],"mappings":"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","file":"static/js/12.4ee2dabe.chunk.js","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport Alert from 'react-bootstrap/Alert';\r\n\r\nclass AutoFocusAlert extends PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.refAlert = React.createRef();    \r\n  }\r\n  componentDidMount() {\r\n    this.scrollToVisible(); \r\n  }\r\n  componentDidUpdate() {\r\n    this.scrollToVisible();\r\n  }\r\n\r\n  scrollToVisible() {\r\n    if(this.props.alert && this.refAlert) {\r\n\t\t\tthis.refAlert.current.scrollIntoView();\r\n\t\t\t// console.log('scrollIntoView', this.refAlert.current);\r\n\t\t}\r\n  }\r\n\r\n\r\n  render() {\r\n    return \t<>\t\t\r\n      { this.props.alert &&\r\n\t\t\t\t<Alert variant={this.props.alertVariant} ref={this.refAlert} >\r\n\t\t\t\t\t{this.props.alert}\r\n\t\t\t\t</Alert>\r\n\t\t\t}\r\n      </>;\r\n  }\r\n}\r\nexport default AutoFocusAlert;\r\n  \r\n  ","import React from \"react\";\r\nimport Table from 'react-bootstrap/Table';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport ReactJson from 'react-json-view';\r\n\r\nexport default function Movie(props) {\r\n\r\n\tlet m = props.movie;\r\n\tconst overlay = <Popover id={`pop-${m._id}`} className=\"popFullPlot\" >\r\n\t\t\t    <Popover.Title as=\"h3\">Full plot</Popover.Title>\r\n\t\t\t    <Popover.Content>\r\n\t\t\t      {m.fullplot}\r\n\t\t\t    </Popover.Content>\r\n\t\t\t  </Popover>;\r\n\t\r\n\t\r\n\treturn  <div className=\"px-2 py-2\"\r\n\t\tkey={`movie-${m._id}`}\r\n\t\t><div className=\"movie\"><div className=\"px-2 py-2\"  >\r\n\t\r\n\t\t<OverlayTrigger placement=\"right\" overlay={overlay}>\r\n\t\t\t<span className=\"action title\">{m.title} ({m.year})</span>\r\n\t\t</OverlayTrigger>\r\n\t\t\r\n\t\t<Table className=\"movieTable\">\r\n\t\t\t<tbody><tr>\r\n\t\t\t   <td className=\"poster\">\r\n\t\t\t\t\t{m.poster && \r\n\t\t\t\t\t<img style={{width:'auto',height:'300px'}} \r\n\t\t\t\t\t\tsrc={m.poster} alt={m.poster} /> }\r\n\t\t\t   </td>\r\n\t\t\t   <td>\r\n\t\t\t\t\t\t<div>Cast : { m.cast && \r\n\t\t\t\t\t\t\tm.cast.map( (el, i) =>(\r\n\t\t\t\t\t\t\t\t<span key={el}>{i>0&& <span>,&nbsp;</span>}\r\n\t\t\t\t\t\t\t\t<span className=\"action cast\" \r\n\t\t\t\t\t\t\t\t\tonClick={()=>props.addLabel({type:'cast',value:el})}>{el}</span></span>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}</div>\r\n\t\t\t\t\t\t<div>{m.genres && \r\n\t\t\t\t\t\t\tm.genres.map( (el, i) =>(\r\n\t\t\t\t\t\t\t\t<span key={el}>{i>0&& <span>,&nbsp;</span>}\r\n\t\t\t\t\t\t\t\t<span className=\"action genre\" \r\n\t\t\t\t\t\t\t\t\tonClick={()=>props.addLabel({type:'genres',value:el})}>{el}</span></span>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t}</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{m.directors && \r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tDirectors : {m.directors.join(', ')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{m.countries && m.countries.join(', ')}  {m.languages && `(${m.languages.join(', ')})`}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"plot\">{m.plot}</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"py-2\" >\r\n\t\t\t\t\t\t\t<OverlayTrigger trigger=\"click\" placement=\"right\" rootClose  overlay={\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Popover id={`pop-json-${m._id}`} className=\"popMovieJson\" >\r\n\t\t\t\t\t\t\t\t    <Popover.Title as=\"h3\">Json view</Popover.Title>\r\n\t\t\t\t\t\t\t\t    <Popover.Content>\r\n\t\t\t\t\t\t\t\t      <ReactJson displayDataTypes={false} src={m} />\r\n\t\t\t\t\t\t\t\t    </Popover.Content>\r\n\t\t\t\t\t\t\t\t  </Popover>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t<span role=\"img\" className=\"action\">🎞️ More data</span>\r\n\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t</td>\r\n\t\t\t</tr></tbody>\r\n\t\t</Table>\r\n\t\t\r\n\t\r\n\t</div></div></div>;\r\n\t\t\t\t\t\t\r\n}","import {moviesServiceUrl} from '../env.js';\n\n\n\n/**\n * ex searchText='type=FORM'\n */\nexport async function findMovies(filter, limit) {\n  let params = {\n\t\tfilter : filter? filter : '{}', \n\t\tlimit};\n  console.log(`findMovies `, params);\n\n  let url = new URL(moviesServiceUrl);\n  \n  Object.keys(params).forEach(key => url.searchParams.append(key, params[key]))\n  let res = await fetch(url);\n  let json = await res.json();\n  console.log('result ', json);\n\n  return json;\n};\n\n","import React, { PureComponent } from \"react\";\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\nimport AutoFocusAlert from '../Alert/AutoFocusAlert';\r\nimport ReactJson from 'react-json-view';\r\nimport { findMovies } from '../../service/movies-service';\r\nimport { correctJson, formatJson } from '../../service/utils';\r\nimport Movie from './Movie';\r\nimport './Movies.css';\r\n\r\nconst max = 10;\r\n\r\nclass Movies extends PureComponent {\r\n\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t// item id : props.item \r\n\t\tthis.state = {\r\n\t\t\talert : 'What are you looking for?',\r\n\t\t\talertVariant : 'info',\r\n\t\t\tsearch_title : '',\r\n\t\t\tsearch_cast : '',\r\n\t\t\tsearch_year : '',\r\n\t\t\tsearch_query : '',\r\n\t\t\tsearch_labels : [],\r\n\t\t};\r\n\t}\r\n\r\n\t  handleFormChange = (ev) => {\r\n\t\t  let change = {};\r\n\t      change[ev.target.name] = ev.target.value;\r\n\t\t  this.setState(change);\r\n\t\t  // console.log('handleFormChange', change);\r\n\t  }\r\n\r\n      find = async () => {\r\n\t\tthis.showInfo('Searching...');\r\n\t\ttry {\r\n\t\t  let data = await findMovies(JSON.stringify(this.getQuery()), max);\r\n          this.setState({ data });\r\n\t\t  let i = data.count>max? ` Only ${max} results are shown` : '';\r\n          if(data.count>=0) {\r\n\t\t\t  this.showSuccess(`Found ${data.count} movie(s) \r\n\t\t\t\t\t${i}`);\r\n\t\t  } else {\r\n\t\t\tthis.showError('Error '+data.message);\r\n\t\t  }\r\n\t\t} catch(e) {\r\n\t\t\tthis.showError('Error '+e);\r\n\t\t}\r\n      }\r\n\r\n     getQuery = () => {\r\n\t   let query = {};\r\n\r\n       if(this.state.search_title.trim()) {\r\n\t      query.title = `/${this.state.search_title.trim()}/`;\r\n\t   }\r\n       if(this.state.search_cast.trim()) {\r\n\t      query.cast = `/${this.state.search_cast.trim()}/`;\r\n\t   }\r\n       if( this.state.search_year.trim() ) {\r\n\t      let y = this.state.search_year.trim();\r\n          if(y.startsWith('{')) {\r\n\t\t\t query.year = formatJson(correctJson(y));\r\n\t\t  } else {\r\n\t\t\t query.year = parseInt(y);\r\n\t\t  }\r\n\t   }\r\n       if(this.state.search_query.trim()) {\r\n\t      let q = this.state.search_query.trim();\r\n          q = formatJson(correctJson(q));\r\n\t\t  Object.keys(q).forEach( k => query[k] =  q[k] );\r\n\t   }\r\n       this.addLabelsToQuery('cast', query);\r\n       this.addLabelsToQuery('genres', query);\r\n\t   this.setState({query});\r\n       return query;\r\n     }\r\n\r\n    addLabelsToQuery = (attribute, query) => {\r\n\t   let labels = this.state.search_labels.filter(l => l.type===attribute);\r\n       if(labels.length===0) return;\r\n       query[attribute] = {\r\n\t       $in : labels.map(l => l.value)\r\n\t   };\r\n\t}\r\n\r\n\r\n    addLabel = (p) => {\r\n\t    // console.log('addLabel', p);\r\n\t\tconst v = this.state.search_labels.find(l => l.type===p.type && l.value===p.value);\r\n\t\tif(v) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tthis.setState( {\r\n\t\t\t\tsearch_labels : [...this.state.search_labels, p]\r\n\t\t\t}, this.find);\r\n\t\t}\r\n    }\r\n\r\n    removeLabel = (p) => {\r\n\t\tconst v = this.state.search_labels.find(l => l.type===p.type && l.value===p.value);\r\n\t\tif(v) {\r\n\t\t\tthis.setState( {\r\n\t\t\t\tsearch_labels : this.state.search_labels.filter(l =>  !Object.is(l,v)) \r\n\t\t\t}, this.find);\r\n\t\t} \r\n    }\r\n\r\n\tshowError = (err) => {\r\n\t\t\tthis.setState({ alert: err, alertVariant : 'danger'});\r\n\t};\r\n\tshowWarn = (msg) => {\r\n\t\t\tthis.setState({ alert: msg, alertVariant : 'warning' });\r\n\t};\r\n\tshowSuccess = (msg) => {\r\n\t\t\tthis.setState({ alert: msg, alertVariant : 'success', ready : true});\r\n\t};\r\n\tshowInfo = (msg) => {\r\n\t\t\tthis.setState({  alert: msg, alertVariant : 'info' });\r\n\t};\r\n\r\n    render() {\r\n\t    return <div className=\"px-2\" >\r\n\t\t\t<AutoFocusAlert alert={this.state.alert} alertVariant={this.state.alertVariant} >\r\n\t\t\t</AutoFocusAlert>\r\n\t\t\t\r\n\t\t\t\t<Form>\r\n\t\t\t\t\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-title\">Title</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"search_title\"\r\n\t\t\t\t\t\t\tvalue={this.state.search_title}\r\n\t\t\t\t\t\t\tplaceholder=\"Ex. devil\"\r\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-title\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-cast\">Cast</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"search_cast\"\r\n\t\t\t\t\t\t\tvalue={this.state.search_cast}\r\n\t\t\t\t\t\t\tplaceholder=\"Ex. tom cruise\"\r\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-cast\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-title\">Year</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"search_year\"\r\n\t\t\t\t\t\t\tvalue={this.state.search_year}\r\n\t\t\t\t\t\t\tplaceholder=\"Ex. 2014 or { $gt : 2014 } or { $gte : 2014 }\"\r\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-year\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-query\">Other query in JSON</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"search_query\"\r\n\t\t\t\t\t\t\tvalue={this.state.search_query}\r\n\t\t\t\t\t\t\tplaceholder=\"Ex. {directors:/spielberg/}\"\r\n\t\t\t\t\t\t\tonChange={this.handleFormChange}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-query\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"py-2\">\r\n\t\t\t\t\t\tLabels : {this.state.search_labels.map((l) => \r\n\t\t\t\t\t\t  { \r\n\t\t\t\t\t\t\treturn <span className=\"px-2\"  key={`T-${l.type}-V-${l.value}`} >\r\n\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\tonClick={()=>this.removeLabel(l)}\r\n\t\t\t\t\t\t\t\t\tclassName={`btn-sm`} \r\n\t\t\t\t\t\t\t\t\tvariant={l.type==='cast'? 'outline-primary' : 'outline-success'} >\r\n\t\t\t\t\t\t\t\t\t{l.value} <span role=\"img\">❎ </span>\r\n\t\t\t\t\t\t\t</Button></span>\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t<Button variant=\"primary\"  onClick={this.find} >\r\n\t\t\t\t\t\tSearch\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form>\r\n\r\n\t\t\t\t{this.state.query && \r\n\t\t\t\t\t<div className=\"py-2\" >\r\n\t\t\t\t\t\t<div>Query</div>\r\n\t\t\t\t\t\t<ReactJson displayDataTypes={false} src={this.state.query} collapsed />\r\n\t\t\t\t\t</div>\r\n  \t\t\t\t}\r\n\t\t\r\n\r\n\t\t\t\t{this.state.data && this.state.data.movies &&\r\n\t\t\t\t\t<div className=\"py-2\" >\r\n\t\t\t\t\t{ this.state.data.movies.map( (m)=>\r\n\t\t\t\t\t\t<Movie key={m._id} movie={m} addLabel={this.addLabel} />\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t)}</div>\r\n  \t\t\t\t}\r\n\r\n\r\n\r\n\t\t</div>\r\n\t}\r\n};\r\n\r\nexport default Movies;","\r\n\r\nexport var serviceUrl =   // 'http://localhost:1234/'; \r\n     'https://generic-db.glitch.me/';\r\n\r\n\r\nexport var moviesServiceUrl =   // 'http://localhost:1234/api/movies'; \r\n     'https://verceltest-smoky.now.sh/api/movies';\r\n"],"sourceRoot":""}