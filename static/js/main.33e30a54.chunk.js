(this.webpackJsonpreactdemo=this.webpackJsonpreactdemo||[]).push([[0],{295:function(e,t,a){e.exports=a(559)},555:function(e,t,a){},559:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(60),i=a.n(o),s=a(290),l=a(62),c=a(16),m=a(17),u=a(19),d=a(18),p=a(47),h=a(36),f=a.n(h),E=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).menuListe=[["ManageData","Manage your data"],["ManageForms","Manage your forms"],["FormatJson","Example : How to format Json"],["JsonFormExample","Example : Dynamic form"]],n.state={menuItemText:""};var r=window.location.pathname;console.log("window.location",window.location);var o=n.menuListe.find((function(e){return"/"+e[0]===r}));return o&&(n.state.menuItemText=o[1]),n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},f.a.rabbitFace,"Welcome !!",f.a.rabbit,r.a.createElement(p.a,{className:"px-2"},r.a.createElement(p.a.Toggle,{variant:"primary",id:"dropdown-basic"},"Menu"),r.a.createElement(p.a.Menu,null,this.menuListe.map((function(e,t){return r.a.createElement(p.a.Item,{href:"#",onClick:function(){return window.location.href="/"+e[0]},key:e[0]},e[1])})))),r.a.createElement("header",null,this.state.menuItemText)))}}]),a}(n.PureComponent),y=a(29),b=a(54),g=a(61),v=a.n(g),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleFormChange=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t),console.log("handleFormChange",t)},n.formatJson=function(){var e={};try{e=JSON.parse(n.state.jsonContent)}catch(t){e={err:""+t}}n.setState({formattedObject:e}),console.log("formatJson",e)},n.state={formattedObject:{},jsonContent:'{ "value" : "3" }'},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"px-2"},r.a.createElement(y.a,null,r.a.createElement(y.a.Group,{controlId:"jsonContent"},r.a.createElement(y.a.Label,null,"Json content"),r.a.createElement(y.a.Control,{as:"textarea",row:"5",name:"jsonContent",placeholder:'{ "value" : "3" }',onChange:this.handleFormChange,value:this.state.jsonContent})),r.a.createElement(b.a,{variant:"primary",onClick:this.formatJson},"Format")),r.a.createElement("div",{className:"py-2"},r.a.createElement(v.a,{displayDataTypes:!1,src:this.state.formattedObject})))}}]),a}(n.PureComponent),j=a(15),S=a.n(j),C=a(38),O=a(289),F=a(70),D=a(84);function T(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{show:e.show,onHide:e.handleClose,animation:!0,size:e.size,backdrop:"static"},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,e.title?e.title:"Confirmation")),r.a.createElement(D.a.Body,null,e.children),e.handleConfirm&&r.a.createElement(D.a.Footer,null,r.a.createElement(b.a,{variant:"secondary",onClick:e.handleClose},"Close"),r.a.createElement(b.a,{variant:"primary",onClick:e.handleConfirm},"Confirm"))))}var k="https://generic-db.glitch.me/";function x(e){return R.apply(this,arguments)}function R(){return(R=Object(C.a)(S.a.mark((function e(t){var a,n,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("filter with ".concat(t)),n=k+(a="items"+(t?"?"+t:"")),e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:return o=e.sent,console.log(a+" => ",o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return I.apply(this,arguments)}function I(){return(I=Object(C.a)(S.a.mark((function e(t){var a,n,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("find by id ".concat(t)),n=k+(a="items/"+t),e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:return o=e.sent,console.log(a+" => ",o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=Object(C.a)(S.a.mark((function e(t){var a,n,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete by id ".concat(t)),n=k+(a="items/"+t+"/delete"),e.next=5,fetch(n,{method:"DELETE",mode:"cors"});case 5:return r=e.sent,e.next=8,r.json();case 8:return o=e.sent,console.log(a+" => ",o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return J.apply(this,arguments)}function J(){return(J=Object(C.a)(S.a.mark((function e(t){var a,n,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("save",t),n=k+(a="items/save"),e.next=5,fetch(n,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)});case 5:return r=e.sent,e.next=8,r.json();case 8:return o=e.sent,console.log(a+" => ",o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){var t;if(!e)return null;try{t=JSON.parse(e)}catch(a){console.log("json invalide",a),t={jsonInvalide:""+a}}return console.log("formatJson",t),"object"===typeof t?t:{nonJsonData:""+t}}function A(){var e=function(e){return(e>9?"":"0")+e},t=new Date,a=t.getMonth()+1,n=e(t.getDate()),r=e(t.getHours()),o=e(t.getMinutes()),i=e(t.getSeconds());return[t.getFullYear(),a,n,"_",r,o,i].join("")}var q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getFormattedObject=function(){console.log("data",n.state.data);var e=n.state.data.content;try{var t=JSON.parse(e);if(t&&"object"===typeof t)return console.log("result",t),t}catch(a){console.log(a)}return{content_non_json:e}},n.state={success:"",error:""},N(e.item).then((function(e){e.length>0?n.setState({data:e[0],error:""}):n.setState({error:"Error : not found"})}),(function(e){n.setState({error:"Error while loading : "+e})})),n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"px-2"},this.state.success&&r.a.createElement(F.a,{variant:"success"},this.state.success),this.state.error&&r.a.createElement(F.a,{variant:"danger"},this.state.error),this.state.data&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},"Type : ",this.state.data.type),r.a.createElement("div",{className:"row"},"Description : ",this.state.data.description)),r.a.createElement("div",{className:"py-2"},r.a.createElement(v.a,{displayDataTypes:!1,src:this.getFormattedObject()}))))}}]),a}(n.PureComponent),B=a(294),G=a(30),z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).refAlert=r.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.scrollToVisible()}},{key:"componentDidUpdate",value:function(){this.scrollToVisible()}},{key:"scrollToVisible",value:function(){this.props.alert&&this.refAlert&&this.refAlert.current.scrollIntoView()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.alert&&r.a.createElement(F.a,{variant:this.props.alertVariant,ref:this.refAlert},this.props.alert))}}]),a}(n.PureComponent),H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleFormChange=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t)},n.save=Object(C.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.showInfo("Saving..."),t=L(n.state.content),e.next=5,V({id:n.state.id,type:n.state.type,description:n.state.description,content:n.state.content});case 5:a=e.sent,n.props.callbackRefresh&&n.props.callbackRefresh(),n.setState({formattedObject:t}),"OK"===a.status?n.showSuccess(a.message):n.showError(a.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),n.showError("Error "+e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),n.adjustRows=function(e){if(!e)return 3;var t=e.split("\n");return Math.min(t.length+1,10)},n.showError=function(e){n.setState({alert:e,alertVariant:"danger"})},n.showWarn=function(e){n.setState({alert:e,alertVariant:"warning"})},n.showSuccess=function(e){n.setState({alert:e,alertVariant:"success",ready:!0})},n.showInfo=function(e){n.setState({alert:e,alertVariant:"info"})},n.state={alert:"Loading...",alertVariant:"info"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.itemId)N(this.props.itemId).then((function(t){if(t.length>0){var a=L(t[0].content);e.setState(Object(B.a)({},t[0],{idReadOnly:!0,formattedObject:a})),e.showSuccess("")}else e.showError("Error : not found")}),(function(t){e.showError("Error while loading : "+t)}));else{this.setState({formattedObject:L(""),id:"",description:"",content:"",type:this.props.objectType}),this.showSuccess("")}}},{key:"render",value:function(){return r.a.createElement("div",{className:"px-2"},r.a.createElement(z,{alert:this.state.alert,alertVariant:this.state.alertVariant}),this.state.ready&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(G.a,{className:"mb-3"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:"fieldLabel-id"},"Unique ID")),r.a.createElement(y.a.Control,{name:"id",value:this.state.id,placeholder:"required",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-id",disabled:Boolean(this.state.idReadOnly)})),r.a.createElement(G.a,{className:"mb-3"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:"fieldLabel-description"},"Description")),r.a.createElement(y.a.Control,{name:"description",value:this.state.description?this.state.description:"",placeholder:"describe your data",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-description"})),r.a.createElement(y.a.Group,{controlId:"content"},r.a.createElement(y.a.Label,null,"Json content"),r.a.createElement(y.a.Control,{as:"textarea",name:"content",rows:this.adjustRows(this.state.content),placeholder:'{ "value" : "3" }',onChange:this.handleFormChange,value:this.state.content?this.state.content:""})),r.a.createElement(b.a,{variant:"primary",onClick:this.save},"Save")),this.state.formattedObject&&r.a.createElement("div",{className:"py-2"},r.a.createElement("div",null,"Json view"),r.a.createElement(v.a,{displayDataTypes:!1,src:this.state.formattedObject}))))}}]),a}(n.PureComponent),U=a(293),_=a(139),W=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).refreshCount=0,n}return Object(m.a)(a,[{key:"render",value:function(){return this.refreshCount++,console.log("DynamicFormChild render",this.refreshCount),r.a.createElement(_.a,{schema:this.props.schema,onSubmit:this.props.onSubmit,onError:this.props.onError,formData:this.props.formData,showErrorList:!1})}}]),a}(n.PureComponent),$={title:"Let's define a simple form",description:"To create a complex form, use the 'raw JSON editor'",type:"object",properties:{title:{type:"string",default:"Title of your form",title:"Give your form a title"},listFields:{type:"array",title:"Manage the fields",items:{type:"object",required:["fieldName","type"],properties:{fieldName:{type:"string",title:"Techinical field name",pattern:"^[A-Za-z0-9_-]{0,30}$"},type:{enum:["string","integer","boolean","date","enum"],default:"string",title:"Data type"},title:{type:"string",title:"Title to show in the form"},booleanRequired:{type:"boolean",title:"Required?"}},dependencies:{type:{oneOf:[{properties:{type:{enum:["enum"]},enumValues:{type:"string",title:"Enum values (comma separated)"}}},{properties:{type:{enum:["string","integer","boolean","date"]}}}]}}}}}},K=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).prefillForm=function(){var e=Object(C.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(t).then((function(e){if(e.length>0){for(var a=e[0],r={},o=0,i=Object.entries(a);o<i.length;o++){var s=Object(U.a)(i[o],2),l=s[0],c=s[1];if("content"===l){var m=L(c);r.dataToSave=m,n.dataForRJSF=n.adaptFormDefinition(m,a.type)}else r[l]=c}return console.log("setState",r),n.setState(r),a}return Promise.reject("ID ".concat(t," not found "))})).then((function(e){return n.loadSchema(e.type)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadSchema=function(){var e=Object(C.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("FORM"!==t){e.next=4;break}return n.setState({schema:$}),console.log("use SchemaForm",$),e.abrupt("return",Promise.resolve({id:"FORM",description:"meta schema",schema:$}));case 4:return e.abrupt("return",N(t).then((function(e){if(e.length>0){var a=e[0];if("FORM"!==a.type)return Promise.reject("Object ID ".concat(t," must be of type FORM (found ").concat(a.type,")"));var r=L(a.content);return r&&r.properties?(n.setState({schema:r}),a):Promise.reject("Form '".concat(t,"' has invalide schema (found ").concat(a.content,")"))}return Promise.reject("Form '".concat(t,"' not found "))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showError=function(e){n.setState({alert:e,alertVariant:"danger"})},n.showWarn=function(e){n.setState({alert:e,alertVariant:"warning"})},n.showSuccess=function(e){n.setState({alert:e,alertVariant:"success",ready:!0})},n.showInfo=function(e){n.setState({alert:e,alertVariant:"info"})},n.handleFormChange=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t)},n.onSubmit=function(){var e=Object(C.a)(S.a.mark((function e(t){var a,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("submit",t),n.showInfo("Saving..."),a=n.transformToSave(t.formData),n.setState({dataToSave:a}),r=JSON.stringify(a,null," "),e.next=8,V({id:n.state.id,type:n.state.type,description:n.state.description,content:r});case 8:"OK"===(o=e.sent).status?n.showSuccess(o.message):n.showError(o.message),"OK"===o.status&&n.props.callbackRefresh&&n.props.callbackRefresh(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),n.showError(""+e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),n.transformToSave=function(e){return"FORM"!==n.state.type?e:e.listFields?((e=Object.assign({},e)).type="object",e.properties={},e.required=[],e.listFields.forEach((function(t,a){var n=Object.assign({},t);e.properties[n.fieldName]=n,n.booleanRequired&&e.required.push(n.fieldName),delete n.fieldName,"date"===n.type?(n.type="string",n.format="date"):"enum"===n.type&&(delete n.type,n.enum=[],n.enumValues&&(n.enumValues.split(",").forEach((function(e){n.enum.push(e.trim())})),delete n.enumValues))})),delete e.listFields,console.log("transformToSave",e),e):e},n.adaptFormDefinition=function(e,t){if(!e)return{};if("FORM"!==t)return e;var a=Object.assign({},e);return a.properties?(a.listFields=[],Object.getOwnPropertyNames(a.properties).forEach((function(e,t){var n=a.properties[e];n.fieldName=e,"date"===n.format?(n.type="date",delete n.format):n.enum&&(n.type="enum",n.enumValues=n.enum.join(", "),delete n.enum),a.required&&a.required.includes(e)&&(n.booleanRequired=!0),a.listFields.push(n)})),delete a.properties,console.log("adaptFormDefinition",e,a),a):a},n.onError=function(e){n.showWarn("Problem with a form? \n\t\t\t".concat(e&&e[0]&&e[0].stack?e[0].stack:"")),console.log("Form error",e)},n.state={alert:"Loading...",varient:"info"},n.idReadOnly=Boolean(e.param.id),n.dataForRJSF={},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.param.id?(console.log("create an prefield form"),this.prefillForm(this.props.param.id).then((function(){e.showSuccess()})).catch((function(t){return e.showError("Error while loading : "+t)}))):(console.log("create an empty form"),this.loadSchema(this.props.param.form).then((function(t){return e.setState({id:e.props.param.suggestedId,type:t.id,description:e.props.param.initialDescription?e.props.param.initialDescription:null,dataToSave:e.props.param.initialData?e.props.param.initialData:null}),e.dataForRJSF=e.adaptFormDefinition(e.props.param.initialData,t.id),e.showSuccess()})).catch((function(t){console.log(t),e.showError("Error while loading : "+t)})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"px-2"},r.a.createElement(z,{alert:this.state.alert,alertVariant:this.state.alertVariant}),this.state.ready&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(G.a,{className:"mb-3"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:"fieldLabel-id"},"Unique ID")),r.a.createElement(y.a.Control,{name:"id",value:this.state.id,placeholder:"required",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-id",disabled:Boolean(this.idReadOnly)})),r.a.createElement(G.a,{className:"mb-3"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:"fieldLabel-type"},"Type")),r.a.createElement(y.a.Control,{name:"type",value:this.state.type,"aria-describedby":"fieldLabel-type",disabled:!0})),r.a.createElement(G.a,{className:"mb-3"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:"fieldLabel-description"},"Description")),r.a.createElement(y.a.Control,{name:"description",value:this.state.description?this.state.description:"",placeholder:"describe your form",onChange:this.handleFormChange,"aria-describedby":"fieldLabel-description"}))),r.a.createElement("div",{className:"px-2"},r.a.createElement(W,{schema:this.state.schema,onSubmit:this.onSubmit,onError:this.onError,formData:this.dataForRJSF})),this.state.dataToSave&&r.a.createElement("div",{className:"py-2"},r.a.createElement("div",null,"View JSON data"),r.a.createElement(v.a,{displayDataTypes:!1,src:this.state.dataToSave,collapsed:"true"}))))}}]),a}(n.PureComponent),Q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).refresh=function(e){x(n.props.filter).then((function(t){t=t.sort((function(e,t){return e.id.localeCompare(t.id)})),n.setState({data:t}),n.showSuccess("".concat(e||""," ").concat(t.length," element(s) found.")),n.props.notifyResultList&&n.props.notifyResultList(t)}),(function(e){n.showError("Error while loading : "+e)}))},n.askConfirmDelete=function(e){console.log("delete item",e),n.setState({itemToDelete:e})},n.confirmDelete=Object(C.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.itemToDelete,n.setState({itemToDelete:null}),e.prev=2,e.next=5,M(t);case 5:a=e.sent,console.log("delete result",a),n.refresh("Deleted "+t+". "),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n.showError("Error while deleting : "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),n.cancelDelete=function(){n.setState({itemToDelete:null})},n.ViewItem=function(e){console.log("itemToShow",e),n.setState({itemToShow:e})},n.editCustomForm=function(e){n.setState({customFormParam:e})},n.editRawJson=function(e){n.setState({itemToEditAsRawJson:e})},n.needRefresh=!1,n.notifyRefresh=function(){n.needRefresh=!0},n.conditionalRefresh=function(){n.needRefresh&&(n.refresh(),n.needRefresh=!1)},n.showError=function(e){n.setState({alert:e,alertVariant:"danger"})},n.showWarn=function(e){n.setState({alert:e,alertVariant:"warning"})},n.showSuccess=function(e){n.setState({alert:e,alertVariant:"success",ready:!0})},n.showInfo=function(e){n.setState({alert:e,alertVariant:"info"})},n.state={alert:"Please wait...",alertVariant:"info"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.refresh("")}},{key:"componentDidUpdate",value:function(e){e.filter!==this.props.filter&&this.refresh("")}},{key:"render",value:function(){var e=this;return console.log("ManageList render ",this.props.filter),r.a.createElement("div",{className:"py-2"},this.state.alert&&r.a.createElement(F.a,{variant:this.state.alertVariant},this.state.alert),r.a.createElement(T,{show:Boolean(this.state.itemToDelete),handleConfirm:this.confirmDelete,handleClose:this.cancelDelete},r.a.createElement("p",null,"Do you want to delete the item ID ",this.setState.itemToDelete," ?")),this.state.itemToShow&&r.a.createElement(T,{show:Boolean(this.state.itemToShow),title:"View Item ID ".concat(this.state.itemToShow),handleClose:function(){e.setState({itemToShow:null})}},r.a.createElement(q,{item:this.state.itemToShow})),this.state.itemToEditAsRawJson&&r.a.createElement(T,{show:Boolean(this.state.itemToEditAsRawJson),size:"lg",title:"Edit ".concat(this.state.itemToEditAsRawJson.type," ID ").concat(this.state.itemToEditAsRawJson.id," (as raw json)"),handleClose:function(){e.conditionalRefresh(),e.setState({itemToEditAsRawJson:null})}},r.a.createElement(H,{itemId:this.state.itemToEditAsRawJson.id,callbackRefresh:this.notifyRefresh})),this.state.customFormParam&&r.a.createElement(T,{show:Boolean(this.state.customFormParam),size:"xl",title:this.state.customFormParam.id?"Edit item ID ".concat(this.state.customFormParam.id):"Create a new object ".concat(this.state.customFormParam.form),handleClose:function(){e.conditionalRefresh(),e.setState({customFormParam:null})}},r.a.createElement(K,{param:this.state.customFormParam,callbackRefresh:this.state.customFormParam.form?null:this.notifyRefresh})),this.state.data&&r.a.createElement(O.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),this.props.showType&&r.a.createElement("th",null,"Type (Form ID)"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Custom form"),r.a.createElement("th",null,"Simple actions"))),r.a.createElement("tbody",null,this.state.data.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.id),e.props.showType&&r.a.createElement("th",null,t.type),r.a.createElement("td",null,t.description),r.a.createElement("td",null,"FORM"===t.type&&r.a.createElement("button",{onClick:function(){return e.editCustomForm({form:t.id,suggestedId:"".concat(t.id,"_").concat(A())})},title:"New instance from the form ".concat(t.id)},f.a.plus),"FORM"===t.type&&r.a.createElement("button",{onClick:function(){return e.editCustomForm({id:t.id})},title:"Edit the form definition ".concat(t.id)},f.a.gear),"FORM"!==t.type&&r.a.createElement("button",{onClick:function(){return e.editCustomForm({id:t.id})},title:"Edit the object ".concat(t.id," with the form ").concat(t.type)},f.a.memo)),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.editRawJson(t)},title:"Edit raw json"},f.a.pencil),r.a.createElement("button",{onClick:function(){return e.ViewItem(t.id)},title:"View raw json"},f.a.magnifyingGlass),r.a.createElement("button",{onClick:function(){return e.askConfirmDelete(t.id)},title:"Delete"},f.a.wastebasket)))})))))}}]),a}(n.PureComponent),Y=[{form:"FORM",suggestedId:"MOVIE",initialDescription:"Use this form to create a movie",initialData:{title:"A movie !",required:["movieTitle"],properties:{movieTitle:{type:"string",title:"Movie title"},movieGenre:{type:"enum",enumValues:"Horror, Comedy, Drama, Avenger, Sci-fi",title:"Genre"},mainActors:{type:"string",title:"Main actors"}}}},{form:"FORM",suggestedId:"TODO_ITEM",initialDescription:"Use this form to create a TODO list",initialData:{title:"A task to do",type:"object",required:["task"],properties:{task:{type:"string",title:"Task"},done:{type:"boolean",title:"Done?"}}}},{form:"FORM",suggestedId:"CONTACT",initialDescription:"Use this form to create a contact",initialData:{title:"My contact",type:"object",required:["firstName","lastName"],properties:{firstName:{type:"string",title:"First name",default:"Chuck"},lastName:{type:"string",title:"Last name"},telephone:{type:"string",title:"Telephone"}}}},{form:"FORM",suggestedId:"SHOPPING_ITEM",initialDescription:"Use this form to create a shopping list",initialData:{title:"What I need to buy",type:"object",required:["item"],properties:{item:{type:"string",title:"Shopping item"},quantity:{type:"integer",title:"Quantity"}}}}],Z=0;var X=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).createForm=function(){n.setState({customFormParam:Y[Z++%Y.length]})},n.closeCreationModal=function(){n.setState({customFormParam:null})},n.notifyRefresh=function(){n.refreshCount++},n.state={},n.refreshCount=1,n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"px-2"},this.state.customFormParam&&r.a.createElement(T,{show:Boolean(this.state.customFormParam),size:"xl",title:"Create a new form",handleClose:this.closeCreationModal},r.a.createElement(K,{param:this.state.customFormParam,callbackRefresh:this.notifyRefresh})),r.a.createElement(Q,{filter:"type=FORM&refreshCount=".concat(this.refreshCount)}),"New form :",r.a.createElement("span",{className:"px-2"},r.a.createElement("button",{onClick:this.createForm},f.a.plus)))}}]),a}(n.PureComponent),ee=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).refresh=function(){x("type=FORM").then((function(e){e=e.sort((function(e,t){return e.id.localeCompare(t.id)})),n.setState({formList:e,error:""})}),(function(e){n.setState({error:"Error while loading : "+e})}))},n.select=function(e){var t=e.target.getAttribute("data-index");void 0===t&&(t=null),n.setState({selectedIndex:t})},n.editCustomForm=function(){n.setState({customFormParam:{form:n.getSelectedForm().id,suggestedId:"".concat(n.getSelectedForm().id,"_").concat(A())}})},n.getSelectedForm=function(){return n.state.selectedIndex?n.state.formList[n.state.selectedIndex]:null},n.closeCreationModal=function(){n.setState({customFormParam:null})},n.notifyRefresh=function(){n.refreshCount++},n.state={selectedIndex:null,formList:[]},n.refreshCount=1,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"px-2"},this.state.customFormParam&&r.a.createElement(T,{show:Boolean(this.state.customFormParam),size:"xl",title:this.state.customFormParam.id?"Edit item ID ".concat(this.state.customFormParam.id):"Create a new object ".concat(this.state.customFormParam.form),handleClose:this.closeCreationModal},r.a.createElement(K,{param:this.state.customFormParam,callbackRefresh:this.notifyRefresh})),r.a.createElement(p.a,{className:"px-2"},r.a.createElement(p.a.Toggle,{variant:"primary",id:"dropdown-basic"},"Filter by an object type"),r.a.createElement(p.a.Menu,null,r.a.createElement(p.a.Item,{href:"#",onClick:this.select,key:"all"},r.a.createElement("b",null,"All data")),this.state.formList.map((function(t,a){return r.a.createElement(p.a.Item,{href:"#",onClick:e.select,key:t.id,"data-index":a},"".concat(t.id," - ").concat(t.description))})))),r.a.createElement(Q,{filter:this.state.selectedIndex?"type=".concat(this.state.formList[this.state.selectedIndex].id,"&refreshCount=").concat(this.refreshCount):"type=FORM&opposite=true&refreshCount=".concat(this.refreshCount),showType:"true"}),"New instance",this.state.selectedIndex&&" of ".concat(this.state.formList[this.state.selectedIndex].id," "),":",r.a.createElement("span",{className:"px-2"},this.state.selectedIndex?r.a.createElement("button",{onClick:this.editCustomForm},f.a.plus):r.a.createElement("span",{style:{color:"grey"}},"Choose a type to create an instance.")))}}]),a}(n.PureComponent),te={shows:[{objectContent:{title:"AVENGERS: ENDGAME",genre:"Action",boxofficeRating:2798},objectType:"Movie"},{objectContent:{seasons:[{no:1,numEpisodes:11,releaseDate:"2018-10-26"},{no:2,numEpisodes:9,releaseDate:"2019-04-05"}],title:"Chilling Adventures of Sabrina"},objectType:"Series"}]};function ae(e){return r.a.createElement("div",{className:"px-2"},r.a.createElement(_.a,{schema:{title:"Netflix program",type:"object",definitions:{Movie:{type:"object",title:"",properties:{title:{type:"string",title:"Movie title"},genre:{enum:["Horror","Comedy","Adventure","Triller","Action"],title:"Genre"},boxofficeRating:{type:"integer",title:"Box Office Rating in $"}}},Series:{type:"object",title:"",properties:{title:{type:"string",title:"Series title"},seasons:{type:"array",items:{properties:{no:{type:"integer",title:"Season number"},releaseDate:{type:"string",format:"date",title:"Release date"},numEpisodes:{type:"integer",title:"Number of episodes"}}}}}}},properties:{shows:{title:"",type:"array",items:{properties:{objectType:{title:"Movie or Series",type:"string",enum:["Movie","Series"]}},dependencies:{objectType:{oneOf:[{properties:{objectType:{enum:["Movie"]},objectContent:{$ref:"#/definitions/Movie"}}},{properties:{objectType:{enum:["Series"]},objectContent:{$ref:"#/definitions/Series"}}}]}}}}}},onSubmit:function(e){console.log("submit",e),console.log(JSON.stringify(e.formData))},onError:function(e){return console.error("error",e)},formData:te}))}function ne(e){return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement(E,{selectedMenu:""}),r.a.createElement("hr",null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/FormatJson"},r.a.createElement(w,null)),r.a.createElement(l.a,{path:"/ManageForms"},r.a.createElement(X,null)),r.a.createElement(l.a,{path:"/ManageData"},r.a.createElement(ee,null)),r.a.createElement(l.a,{path:"/JsonFormExample"},r.a.createElement(ae,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement("h1",null,"Please select a menu")))))}a(555),a(556),a(557);i.a.render(r.a.createElement(ne,null),document.getElementById("root"))}},[[295,1,2]]]);
//# sourceMappingURL=main.33e30a54.chunk.js.map