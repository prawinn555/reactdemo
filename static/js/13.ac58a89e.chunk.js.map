{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","service/data-service.js","env.js","demo/DynamicForm/EditCustomFormOld.js"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_slicedToArray","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","TypeError","findItems","searchText","a","console","log","path","url","serviceUrl","fetch","res","json","findItemById","id","deleteItemById","method","mode","saveItem","item","headers","Headers","body","JSON","stringify","formatJson","content","obj","parse","jsonInvalide","nonJsonData","getTimeStamp","format","mm","d","Date","getMonth","dd","getDate","hh","getHours","mi","getMinutes","ss","getSeconds","getFullYear","join","EditCustomForm","props","React","useState","success","setSuccess","error","setError","ready","setReady","formattedObject","setFormattedObject","schema","setSchema","Map","map","setMap","updateMap","k","v","set","showError","useEffect","param","then","listResult","entries","key","Promise","reject","loadForm","type","prefillForm","r","catch","e","form","suggestedId","idReadOnly","Boolean","handleFormChange","ev","target","onSubmit","data","formData","get","description","status","message","callbackRefresh","className","variant","Prepend","Text","Control","placeholder","onChange","aria-describedby","disabled","onError","showErrorList","displayDataTypes","src","properties"],"mappings":"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","file":"static/js/13.ac58a89e.chunk.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import {serviceUrl} from '../env.js';\n\n\n\n/**\n * ex searchText='type=FORM'\n */\nexport async function findItems(searchText) {\n  console.log(`filter with ${searchText}`);\n\n  let path = 'items' + (searchText? '?'+searchText : '');\n  let url = serviceUrl + path;\n  let res = await fetch(url);\n\n  let json = await res.json();\n  console.log(path +' => ', json);\n\n  return json;\n};\n\nexport async function findItemById(id) {\n  console.log(`find by id ${id}`);\n\n  let path = 'items/' +id;\n  let url = serviceUrl + path;\n  let res = await fetch(url);\n\n  let json = await res.json();\n  console.log(path +' => ', json);\n\n  return json;\n};\n\n\nexport async function deleteItemById(id) {\n  console.log(`delete by id ${id}`);\n\n  let path = 'items/' +id+ '/delete';\n  let url = serviceUrl + path;\n  let res = await fetch(url, {\n    method: 'DELETE',\n    mode: 'cors',\n  });\n\n  let json = await res.json();\n  console.log(path +' => ', json);\n\n  return json;\n};\n\n\n\nexport async function saveItem(item) {\n  console.log(`save`, item);\n\n  let path = 'items/save';\n  let url = serviceUrl + path;\n  let res = await fetch(url,  {\n    method: 'POST',\n    headers: new Headers({\n      \"Content-Type\": \"application/json\",\n    }),\n    body: JSON.stringify(item)\n  });\n\n  let json = await res.json();\n  console.log(path +' => ', json);\n\n  return json;\n};\n\n\nexport function formatJson(content) {\n\t  let obj;\n\t  if(!content) {\n\t\t  return null;\n\t  }\n\t  try {\n\t\t  obj = JSON.parse(content);\n\t  } catch(err) {\n\t\t  console.log('json invalide', err);\n\t\t  obj = {\n\t\t\t  jsonInvalide : (''+err)\n\t\t  };\n\t  }\n\t  console.log('formatJson', obj);\n\t  return (typeof obj === 'object')? obj : {\n\t\t  nonJsonData : ''+obj\n\t  };\n  };\n\nexport function getTimeStamp() {\n\t\tlet format = (mm) => (mm>9 ? '' : '0') + mm;\n\t\tlet d = new Date();\n\t\tvar mm = d.getMonth() + 1; // getMonth() is zero-based\n\t\tvar dd = format(d.getDate());\n\t\tvar hh = format(d.getHours());\n\t\tvar mi = format(d.getMinutes());\n\t\tvar ss = format(d.getSeconds());\n\t\treturn [d.getFullYear(),\n\t\t\t\tmm,\n\t\t\t\tdd,\n\t\t\t\t'_',\n\t\t\t\thh,\n\t\t\t\tmi,\n\t\t\t\tss,\n\t\t\t\t].join('')\n\t};\n","\r\n\r\nexport var serviceUrl =   // 'http://localhost:1234/'; \r\n     'https://generic-db.glitch.me/';\r\n","import React from \"react\";\r\nimport CustomForm from \"@rjsf/core\";\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport ReactJson from 'react-json-view';\r\nimport { findItemById, saveItem, formatJson } from '../../service/data-service';\r\n\r\nexport default function EditCustomForm(props) {\r\n\r\n\r\n\tconst [success, setSuccess] = React.useState('Loading...');\r\n\tconst [error, setError] = React.useState(null);\r\n\tconst [ready, setReady] = React.useState(false);\r\n\tconst [formattedObject, setFormattedObject] = React.useState(null);\r\n\tconst [schema, setSchema] = React.useState(null);\r\n\tconst [map, setMap] = React.useState(new Map());\r\n\r\n\tconst updateMap = (k,v) => {\r\n\t\tsetMap(new Map(map.set(k,v)));\r\n\t\tconsole.log('updateMap', k, v);\r\n\t\tif(k==='content') {\r\n\t\t\tsetFormattedObject(formatJson(v));\r\n\t\t} \r\n\t}\r\n\r\n\tconst showError = (err) => {\r\n\t\tsetError(err);\r\n\t\tsetSuccess(null);\r\n\t}\r\n\r\n\tReact.useEffect( () => {\r\n\t\tif(props.param.id) {\r\n\t\t\tprefillForm(props.param.id, updateMap, setSchema)\r\n\t\t\t.then((r)=> { \r\n\t\t\t\tsetSuccess(null);\r\n\t\t\t\tsetReady(true);\r\n\t\t\t}).catch((e)=> showError('Error while loading : '+e));\r\n\t\t} else {\r\n\t\t\tloadForm(props.param.form, setSchema)\r\n\t\t\t.then((form)=> {\r\n\t\t\t\tsetSuccess(null);\r\n\t\t\t\tmap.set('type', form.id);\r\n\t\t\t\tupdateMap('id', form.id +'_' + props.param.suggestedId);\r\n\t\t\t\tsetReady(true);\r\n\t\t\t})\r\n\t\t\t.catch((e)=> showError('Error while loading : '+e));\r\n\t\t}\r\n\t}, []);  // run only once\r\n\r\n\tconst idReadOnly = Boolean(props.param.id);\r\n\r\n  \r\n\tconst handleFormChange = (ev) => {\r\n\t\tupdateMap(ev.target.name, ev.target.value);\r\n\t};\r\n\r\n\tconst onSubmit = async (data) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('submit', data);\r\n\t\t\tshowError(null);\r\n\t\t\tsetFormattedObject(data.formData);\r\n\t\t\tmap.set('content', JSON.stringify(data.formData, null, ' '));\r\n\r\n\t\t\tlet res = await saveItem({\r\n\t\t\t\tid : map.get('id'),\r\n\t\t\t\ttype : map.get('type'),\r\n\t\t\t\tdescription : map.get('description'),\r\n\t\t\t\tcontent : map.get('content')\r\n\t\t\t});\r\n\t\t\tconsole.log('result', res);\r\n\t\t\tsetSuccess((res.status==='OK')? res.message : null)\r\n\t\t\tsetError( (res.status!=='OK')? res.message : null)\r\n\r\n\t\t\tif(res.status==='OK' && props.callbackRefresh) {\r\n\t\t\t\tprops.callbackRefresh();\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\tconsole.log(err);\r\n\t\t\tsetError('Error ' +err);\r\n\t\t}\r\n\r\n\t}\r\n\tconst onError = (data) => {\r\n\t\tconsole.error('Form error', data);\r\n\t}\r\n\r\n\r\n\r\n\r\n\treturn (\r\n      <div className=\"px-2\" >\r\n\r\n\t\t{ success &&\r\n\t\t\t<Alert variant='success' >\r\n\t\t\t\t{success}\r\n\t\t\t</Alert>\r\n\t\t}\r\n\t\t{ error &&\r\n\t\t\t<Alert variant='danger' >\r\n\t\t\t\t{error}\r\n\t\t\t</Alert>\r\n\t\t}\r\n\t\t{ ready &&\r\n\t\t\t<>\r\n\t\t\t\t<Form>\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-id\">Unique ID</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"id\"\r\n\t\t\t\t\t\t\tvalue={map.get('id')}\r\n\t\t\t\t\t\t\tplaceholder=\"required\"\r\n\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-id\"\r\n\t\t\t\t\t\t\tdisabled={Boolean(idReadOnly)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend> \r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-type\">Type</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"type\"\r\n\t\t\t\t\t\t\tvalue={map.get('type')}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-type\"\r\n\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\r\n\t\t\t\t\t<InputGroup className=\"mb-3\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t<InputGroup.Text id=\"fieldLabel-description\">Description</InputGroup.Text>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={map.get('description')? map.get('description') : ''}\r\n\t\t\t\t\t\t\tplaceholder=\"describe your form\"\r\n\t\t\t\t\t\t\tonChange={handleFormChange}\r\n\t\t\t\t\t\t\taria-describedby=\"fieldLabel-description\" />\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t</Form>\r\n\t\t\t\t<div className=\"px-2\" >\r\n\t\t\t\t\t<CustomForm schema={schema}\r\n\t\t\t\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\t\t\t\tonError={onError} \r\n\t\t\t\t\t\t\tformData={formattedObject}\r\n\t\t\t\t\t\t\tshowErrorList={false}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{formattedObject && \r\n\t\t\t\t\t<div className=\"py-2\" >\r\n\t\t\t\t\t\t<div>Json view</div>\r\n\t\t\t\t\t\t<ReactJson displayDataTypes={false} src={formattedObject} />\r\n\t\t\t\t\t</div>\r\n  \t\t\t\t}\r\n\t\t\t</>\r\n  \t\t}\r\n      </div>\r\n\r\n\t);\r\n};\r\n\r\nfunction prefillForm(id, updateMap, setSchema) {\r\n\treturn findItemById(id).then(\r\n\t\t\t(listResult) => {\r\n\t\t\t\tif(listResult.length>0) {\r\n\t\t\t\t\tlet item = listResult[0];\r\n\t\t\t\t\tfor (let [key, value] of Object.entries(item)) {\r\n\t\t\t\t\t\tconsole.log(`${key}: ${value}`);\r\n\t\t\t\t\t\tupdateMap(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(`ID ${id} not found `);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t).then(\r\n\t\t(item) => loadForm(item.type, setSchema)\r\n\t);\r\n}\r\n\r\nfunction loadForm(form, setSchema) {\r\n\treturn findItemById(form).then(\r\n\t\t\t(listResult) => {\r\n\t\t\t\tif(listResult.length>0) {\r\n\t\t\t\t\tlet item = listResult[0];\r\n\t\t\t\t\tif(item.type!=='FORM') {\r\n\t\t\t\t\t\treturn Promise.reject(`Object ID ${form} must be of type FORM (actuel ${item.type})`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet schema = formatJson(item.content);\r\n\t\t\t\t\tif(!schema || !schema.properties) {\r\n\t\t\t\t\t\treturn Promise.reject(`Form ID ${form} has invalide schema (actuel ${item.content})`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetSchema(schema);\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Promise.reject(`Form ID ${form} not found `);\r\n\t\t\t\t}\r\n\t});\r\n}"],"sourceRoot":""}